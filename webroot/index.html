<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Tile Slide</title>
    <link rel="icon" href="resources/images/fav-icon.png" />
    <link rel="stylesheet" href="resources/fontawesome-free-6.7.2-web/css/all.min.css" />
    <link rel="stylesheet" href="bootstrap.min.css" />
    <link rel="stylesheet" href="resources/bootstrap-css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="responsive.css" />
  </head>
  <body>
    <!-- Sound Toggle Button -->
    <div class="info-badge" id="info_badge">Some Message</div>

    <button id="menu-sound-toggle" class="pushable sound-toggle">
      <span class="shadow"></span>
      <span class="edge"></span>
      <span class="front">
        <i class="fas fa-volume-up"></i>
      </span>
    </button>

    <!-- Main Menu -->
    <div id="main-menu" class="menu-container">
      <h1 class="game-title">
        <span>T</span>
        <span>i</span>
        <span>l</span>
        <span>e</span>
        <span>&nbsp;</span>
        <span>S</span>
        <span>l</span>
        <span>i</span>
        <span>d</span>
        <span>e</span>
      </h1>

      <div class="menu-buttons">
        <button id="play-custom-level-btn" class="pushable green-btn" style="display: none">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Play Level</span>
        </button>

        <button id="build-btn" class="pushable orange-btn">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Create Level</span>
        </button>

        <button id="how-to-play-btn" class="pushable blue-btn">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">How to Play</span>
        </button>

        <button id="leaderboard-btn" class="pushable golden-btn">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Leaderboard</span>
        </button>
      </div>

      <div class="current-level-info" id="current-level-info" style="display: none">
        <h4>Level by: <span id="level-creator"></span></h4>
        <p>Best Score: <span id="best-score">--</span></p>
      </div>
    </div>

    <!-- How to Play Modal -->
    <div id="how-to-play-modal" class="modal">
      <div class="modal-content">
        <h1>üéÆ How to Play</h1>
        <div class="instructions">
          <h3>üìã Playing Levels:</h3>
          <ul>
            <li>üéØ Push colored tiles into holes to clear the level</li>
            <li>‚¨ÖÔ∏è‚û°Ô∏è‚¨ÜÔ∏è‚¨áÔ∏è Click arrow tiles to push tiles in that direction</li>
            <li>üí• Click cracked tiles to break them (uses 1 move)</li>
            <li>üî® Click drill tiles to create a hole at their location (uses 1 move)</li>
            <li>‚±†Time runs out, so work quickly!</li>
            <li>üèÜ Fewer moves = Higher score!</li>
          </ul>

          <h3>üî® Creating Levels:</h3>
          <ul>
            <li>Use the builder to design your puzzle</li>
            <li>Test and verify your level is solvable</li>
            <li>Share it with the community!</li>
            <li>See how others solve your puzzle</li>
          </ul>

          <h3>üì¶ Tile Types:</h3>
          <ul>
            <li><strong>Block (Green):</strong> Basic pushable tile</li>
            <li><strong>Cracked (Gray):</strong> Can be pushed or clicked to break</li>
            <li><strong>Drill (Brown):</strong> Can be pushed or clicked to create a hole</li>
            <li><strong>Wall (Dark Gray):</strong> Immovable obstacles</li>
            <li><strong>Hole (White):</strong> Target destinations for tiles</li>
            <li><strong>Regular Arrows (Blue):</strong> Push tiles 1 space in their direction</li>
            <li><strong>Power Arrows (Orange):</strong> Push tiles twice - more powerful!</li>
          </ul>
        </div>
        <button id="close-instructions-btn" class="pushable green-btn">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Got it!</span>
        </button>
      </div>
    </div>

    <!-- Game Layout -->
    <div class="game-layout">
      <div class="game-content">
        <div id="hud">
          <div id="game-controls">
            <div class="level-info-text">
              <h1 class="game-heading">Tile Slide</h1>
              <div class="level-title-wrapper">
                <span id="level-title">Loading...</span>
                <small>by <span id="level-author">--</span></small>
              </div>
              <hr />
              <div id="score">Score: 0</div>
              <hr />
            </div>

            <div class="game-btns row gap-2">
              <button id="back-to-menu-btn" class="pushable blue-btn home-btn col">
                <span class="shadow"></span>
                <span class="edge"></span>
                <span class="front">
                  Menu
                  <i class="fa-solid fa-house"></i>
                </span>
              </button>

              <button class="pushable reset-btn col" id="reset-btn">
                <span class="shadow"></span>
                <span class="edge"></span>
                <span class="front">
                  Reset
                  <i class="fa-solid fa-rotate-right reset-icon"></i>
                </span>
              </button>
            </div>
          </div>
        </div>

        <div class="game-board-container">
          <div class="game-info" id="time_move_left">
            <div id="timer">Time: 20s</div>
            <span id="moves-info">Moves: 0</span>
          </div>
          <div class="gameboard-wrapper">
            <div id="game-board"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Level Complete Modal -->
    <div id="level-complete-modal" class="modal">
      <div class="modal-content">
        <h2>Level Complete! üéâ</h2>
        <p class="stats">Your Score: <span id="total-score">0</span></p>
        <div class="name-input-container">
          <input type="text" id="playerNameInput" placeholder="Enter your name" maxlength="20" required />
        </div>
        <button id="submit-score-btn" class="pushable green-btn">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Submit Score</span>
        </button>
      </div>
    </div>

    <!-- Time Up Modal -->
    <div id="time-up-modal" class="modal">
      <div class="modal-content">
        <h2>Time's Up! ‚è∞</h2>
        <p>You ran out of time. Try again!</p>
        <div class="modal-buttons">
          <button id="try-again-btn" class="pushable">
            <span class="shadow"></span>
            <span class="edge"></span>
            <span class="front">Try Again</span>
          </button>
          <button id="time-menu-btn" class="pushable blue-btn">
            <span class="shadow"></span>
            <span class="edge"></span>
            <span class="front">Back to Menu</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal">
      <div class="modal-content">
        <h2>üèÜ Level Leaderboard</h2>
        <div id="custom-leaderboard-list">
          <p id="loading">Loading...</p>
        </div>
        <button id="close-leaderboard-btn" class="pushable">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Close</span>
        </button>
      </div>
    </div>

    <!-- Level Builder -->
    <section id="level-builder" class="container">
      <div class="builder-header">
        <h1>üî® Level Builder</h1>
        <div class="builder-header-buttons">
          <button id="builder-how-to-play-btn" class="pushable blue-btn">
            <span class="shadow"></span>
            <span class="edge"></span>
            <span class="front">How to Play</span>
          </button>
          <button id="builder-to-menu-btn" class="pushable blue-btn">
            <span class="shadow"></span>
            <span class="edge"></span>
            <span class="front">‚Üê Back</span>
          </button>
        </div>
      </div>

      <div class="builder-layout">
        <div class="builder-options">
          <!-- Validation Status -->
          <div id="validation-status" class="validation-status">
            <h4>Level Status</h4>
            <div id="status-message" class="status-message">
              <i class="fas fa-info-circle"></i>
              <span>Design your level and test it to verify it's solvable!</span>
            </div>
          </div>

          <!-- Level Settings -->
          <div class="level-settings">
            <h3>Level Settings</h3>
            <label for="level_title">Level Name:</label>
            <input class="builder-input" type="text" id="level_title" placeholder="My Awesome Puzzle" />

            <label for="moves">Move Limit:</label>
            <input class="builder-input" type="number" id="moves" value="10" min="1" max="50" />

            <label for="custom_level_timer">Time Limit (seconds):</label>
            <input class="builder-input" type="number" id="custom_level_timer" value="30" min="10" max="120" />
          </div>

          <!-- Tile Palette -->
          <div class="tile-palette">
            <h3>Basic Tiles</h3>
            <div class="palette-grid">
              <button class="tile-btn blank selected" data-tile="BLANK" title="Eraser">
                <i class="fas fa-eraser"></i>
              </button>
              <button class="tile-btn block" data-tile="BLOCK" title="Block"></button>
              <button class="tile-btn hole" data-tile="HOLE" title="Hole"></button>
              <button class="tile-btn cracked" data-tile="CRACKED" title="Cracked"></button>
              <button class="tile-btn drill" data-tile="DRILL" title="Drill - Click to create hole"></button>
              <button class="tile-btn wall" data-tile="WALL" title="Wall">
                <i class="fas fa-square"></i>
              </button>
            </div>
            
            <h4>Regular Arrows</h4>
            <div class="palette-grid">
              <button class="tile-btn arrow_up" data-tile="ARROW_UP"></button>
              <button class="tile-btn arrow_down" data-tile="ARROW_DOWN"></button>
              <button class="tile-btn arrow_left" data-tile="ARROW_LEFT"></button>
              <button class="tile-btn arrow_right" data-tile="ARROW_RIGHT"></button>
            </div>
            
            <h4>Power Arrows (2x Push)</h4>
            <div class="palette-grid">
              <button class="tile-btn double_arrow_up" data-tile="DOUBLE_ARROW_UP" title="Double Push Up"></button>
              <button class="tile-btn double_arrow_down" data-tile="DOUBLE_ARROW_DOWN" title="Double Push Down"></button>
              <button class="tile-btn double_arrow_left" data-tile="DOUBLE_ARROW_LEFT" title="Double Push Left"></button>
              <button class="tile-btn double_arrow_right" data-tile="DOUBLE_ARROW_RIGHT" title="Double Push Right"></button>
            </div>
          </div>

          <!-- Builder Actions -->
          <div class="builder-actions">
            <button id="clear-board-btn" class="pushable red-btn">
              <span class="shadow"></span>
              <span class="edge"></span>
              <span class="front">Clear Board</span>
            </button>

            <button id="test-level-btn" class="pushable orange-btn">
              <span class="shadow"></span>
              <span class="edge"></span>
              <span class="front">Test Level</span>
            </button>

            <button id="save-level" class="pushable green-btn" disabled>
              <span class="shadow"></span>
              <span class="edge"></span>
              <span class="front">Publish Level ‚úì</span>
            </button>
          </div>
        </div>

        <!-- Grid Container -->
        <div class="grid-section">
          <div id="grid-wrapper">
            <div id="grid-container"></div>
          </div>

          <!-- Test Mode Controls -->
          <div id="test-controls" class="test-controls" style="display: none">
            <h3>Testing Mode</h3>
            <div class="test-info">
              <span id="test-moves">Moves: 0</span>
              <span id="test-timer">Time: 30s</span>
            </div>
            <button id="stop-test-btn" class="pushable red-btn">
              <span class="shadow"></span>
              <span class="edge"></span>
              <span class="front">Stop Testing</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Scripts -->
    <script type="module" src="webViewScript.js"></script>
    <script type="module" src="scripts/script.js"></script>
  </body>
</html>